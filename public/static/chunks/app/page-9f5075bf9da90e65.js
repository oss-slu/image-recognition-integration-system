(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8806:function(e,t,r){Promise.resolve().then(r.bind(r,6705))},6125:function(e,t,r){"use strict";var a=r(7437),n=r(7648);t.Z=()=>(0,a.jsxs)("nav",{className:"fixed inset-x-0 bottom-0 z-20 flex w-full justify-around border-t bg-white py-2 shadow-md",children:[(0,a.jsx)(n.default,{href:"/",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[(0,a.jsx)("div",{className:"size-6 rounded-full bg-gray-500"}),(0,a.jsx)("span",{className:"text-xs",children:"Home"})]})}),(0,a.jsx)(n.default,{href:"/profile",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[(0,a.jsx)("div",{className:"size-6 rounded-full bg-gray-500"}),(0,a.jsx)("span",{className:"text-xs",children:"Profile"})]})}),(0,a.jsx)(n.default,{href:"/about",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[(0,a.jsx)("div",{className:"size-6 rounded-full bg-gray-500"}),(0,a.jsx)("span",{className:"text-xs",children:"About"})]})}),(0,a.jsx)(n.default,{href:"/previousImages",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[(0,a.jsx)("div",{className:"size-6 rounded-full bg-gray-500"}),(0,a.jsx)("span",{className:"text-xs",children:"Previous Images"})]})})]})},6705:function(e,t,r){"use strict";let a;r.r(t),r.d(t,{default:function(){return P}});var n,o,s,i,l,c,d=r(7437),u=r(6689);(n=i||(i={})).Prompt="PROMPT",n.Camera="CAMERA",n.Photos="PHOTOS",(o=l||(l={})).Rear="REAR",o.Front="FRONT",(s=c||(c={})).Uri="uri",s.Base64="base64",s.DataUrl="dataUrl";class m extends u.Uw{async getPhoto(e){return new Promise(async(t,r)=>{if(e.webUseInput||e.source===i.Photos)this.fileInputExperience(e,t,r);else if(e.source===i.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=e.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",async a=>{0===a.detail?this.fileInputExperience(e,t,r):this.cameraExperience(e,t,r)})}else this.cameraExperience(e,t,r)})}async pickImages(e){return new Promise(async(e,t)=>{this.multipleFileInputExperience(e,t)})}async cameraExperience(e,t,r){if(customElements.get("pwa-camera-modal")){let a=document.createElement("pwa-camera-modal");a.facingMode=e.direction===l.Front?"user":"environment",document.body.appendChild(a);try{await a.componentOnReady(),a.addEventListener("onPhoto",async n=>{let o=n.detail;null===o?r(new u.xz("User cancelled photos app")):o instanceof Error?r(o):t(await this._getCameraPhoto(o,e)),a.dismiss(),document.body.removeChild(a)}),a.present()}catch(a){this.fileInputExperience(e,t,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,r)}fileInputExperience(e,t,r){let a=document.querySelector("#_capacitor-camera-input"),n=()=>{var e;null===(e=a.parentNode)||void 0===e||e.removeChild(a)};a||((a=document.createElement("input")).id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",r=>{let o=a.files[0],s="jpeg";if("image/png"===o.type?s="png":"image/gif"===o.type&&(s="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){let r=new FileReader;r.addEventListener("load",()=>{"dataUrl"===e.resultType?t({dataUrl:r.result,format:s}):"base64"===e.resultType&&t({base64String:r.result.split(",")[1],format:s}),n()}),r.readAsDataURL(o)}else t({webPath:URL.createObjectURL(o),format:s}),n()}),a.addEventListener("cancel",e=>{r(new u.xz("User cancelled photos app")),n()})),a.accept="image/*",a.capture=!0,e.source===i.Photos||e.source===i.Prompt?a.removeAttribute("capture"):e.direction===l.Front?a.capture="user":e.direction===l.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(e,t){let r=document.querySelector("#_capacitor-camera-input-multiple"),a=()=>{var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||((r=document.createElement("input")).id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",t=>{let n=[];for(let e=0;e<r.files.length;e++){let t=r.files[e],a="jpeg";"image/png"===t.type?a="png":"image/gif"===t.type&&(a="gif"),n.push({webPath:URL.createObjectURL(t),format:a})}e({photos:n}),a()}),r.addEventListener("cancel",e=>{t(new u.xz("User cancelled photos app")),a()})),r.accept="image/*",r.click()}_getCameraPhoto(e,t){return new Promise((r,a)=>{let n=new FileReader,o=e.type.split("/")[1];"uri"===t.resultType?r({webPath:URL.createObjectURL(e),format:o,saved:!1}):(n.readAsDataURL(e),n.onloadend=()=>{let e=n.result;"dataUrl"===t.resultType?r({dataUrl:e,format:o,saved:!1}):r({base64String:e.split(",")[1],format:o,saved:!1})},n.onerror=e=>{a(e)})})}async checkPermissions(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}new m;let p=(0,u.fo)("Camera",{web:()=>new m});var h=r(9376),f=r(2265),g={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let x=new Uint8Array(16),y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));var b=function(e,t,r){if(g.randomUUID&&!t&&!e)return g.randomUUID();let n=(e=e||{}).random??e.rng?.()??function(){if(!a){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(x)}();if(n.length<16)throw Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase()}(n)},w=()=>{let e=(0,h.useRouter)(),[t,r]=(0,f.useState)(!1),[a,n]=(0,f.useState)(null);(0,f.useEffect)(()=>{fetch("./setup.json").then(e=>e.json()).then(e=>{n(e)}).catch(e=>{console.error("Error loading config:",e)})},[]);let o=async()=>{try{r(!0);let t=await p.getPhoto({quality:100,resultType:c.Uri,allowEditing:!1});if(!t.webPath)throw Error("Photo capture failed");console.log("Photo captured:",t.webPath);let a=await s(t.webPath),n=b();console.log("Generated image ID:",n),await i(n,a),e.push("/imageGallery?imageId=".concat(n))}catch(e){console.error("Camera error:",e)}finally{r(!1)}},s=e=>new Promise((t,r)=>{fetch(e).then(e=>e.blob()).then(e=>{let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{"string"==typeof a.result?t(a.result):r("Failed to convert image to Base64")}}).catch(e=>r(e))}),i=(e,t)=>new Promise((r,a)=>{let n=indexedDB.open("ImageStorageDB",1);n.onupgradeneeded=()=>{let e=n.result;e.objectStoreNames.contains("images")||e.createObjectStore("images",{keyPath:"id"})},n.onsuccess=()=>{let o=n.result.transaction("images","readwrite");o.objectStore("images").put({id:e,data:t,timestamp:new Date().toISOString()}),o.oncomplete=()=>r(),o.onerror=e=>a(e)},n.onerror=e=>a(e)});return(0,d.jsx)("button",{className:"px-4 py-2 ".concat(null==a?void 0:a.cameraButtonColor," rounded-lg text-white shadow-md"),onClick:o,disabled:t,children:t?"Capturing...":"Use Camera"})},v=r(6125);function P(){let[e,t]=(0,f.useState)(null);return(0,f.useEffect)(()=>{fetch("./setup.json").then(e=>e.json()).then(e=>{t(e)}).catch(e=>{console.error("Error loading config:",e)})},[]),(0,d.jsxs)("div",{className:"relative flex h-screen items-center justify-center",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("h1",{className:"text-3xl font-semibold ".concat(null==e?void 0:e.textColor," mb-8 text-center"),children:"Click below to upload image"}),(0,d.jsx)("div",{className:"flex space-x-4",children:(0,d.jsx)(w,{})})]}),(0,d.jsx)(v.Z,{})]})}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[648,689,971,117,744],function(){return e(e.s=8806)}),_N_E=e.O()}]);