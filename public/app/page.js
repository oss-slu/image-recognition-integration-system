(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6698:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(908),r(4379),r(5866);var a=r(3191),n=r(8716),s=r(7922),i=r.n(s),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,908)),"/Users/obsaabate/Desktop/image-recognition-integration-system/image-recognition-integration-system/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4379)),"/Users/obsaabate/Desktop/image-recognition-integration-system/image-recognition-integration-system/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/obsaabate/Desktop/image-recognition-integration-system/image-recognition-integration-system/app/page.tsx"],m="/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},774:(e,t,r)=>{Promise.resolve().then(r.bind(r,8972))},1133:(e,t,r)=>{Promise.resolve().then(r.bind(r,3138))},3471:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},8972:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(326),n=r(7577),s=r(4482);function i({children:e}){let[t,r]=(0,n.useState)(null);return(0,a.jsxs)("div",{className:`${t?.appBackground} ${t?.textColor} min-h-screen`,children:[a.jsx(s.Z,{}),e]})}r(3800),r(802)},4482:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(326),n=r(434);let s=()=>(0,a.jsxs)("nav",{className:"fixed inset-x-0 bottom-0 z-20 flex w-full justify-around border-t bg-white py-2 shadow-md",children:[a.jsx(n.default,{href:"/",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[a.jsx("div",{className:"size-6 rounded-full bg-gray-500"}),a.jsx("span",{className:"text-xs",children:"Home"})]})}),a.jsx(n.default,{href:"/profile",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[a.jsx("div",{className:"size-6 rounded-full bg-gray-500"}),a.jsx("span",{className:"text-xs",children:"Profile"})]})}),a.jsx(n.default,{href:"/about",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[a.jsx("div",{className:"size-6 rounded-full bg-gray-500"}),a.jsx("span",{className:"text-xs",children:"About"})]})}),a.jsx(n.default,{href:"/previousImages",children:(0,a.jsxs)("div",{className:"flex cursor-pointer flex-col items-center text-gray-700",children:[a.jsx("div",{className:"size-6 rounded-full bg-gray-500"}),a.jsx("span",{className:"text-xs",children:"Previous Images"})]})})]})},3138:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a,n,s,i=r(326),o=r(3800);(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(a||(a={})),function(e){e.Rear="REAR",e.Front="FRONT"}(n||(n={})),function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"}(s||(s={}));class l extends o.Uw{async getPhoto(e){return new Promise(async(t,r)=>{if(e.webUseInput||e.source===a.Photos)this.fileInputExperience(e,t,r);else if(e.source===a.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=e.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",async a=>{0===a.detail?this.fileInputExperience(e,t,r):this.cameraExperience(e,t,r)})}else this.cameraExperience(e,t,r)})}async pickImages(e){return new Promise(async(e,t)=>{this.multipleFileInputExperience(e,t)})}async cameraExperience(e,t,r){if(customElements.get("pwa-camera-modal")){let a=document.createElement("pwa-camera-modal");a.facingMode=e.direction===n.Front?"user":"environment",document.body.appendChild(a);try{await a.componentOnReady(),a.addEventListener("onPhoto",async n=>{let s=n.detail;null===s?r(new o.xz("User cancelled photos app")):s instanceof Error?r(s):t(await this._getCameraPhoto(s,e)),a.dismiss(),document.body.removeChild(a)}),a.present()}catch(a){this.fileInputExperience(e,t,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,r)}fileInputExperience(e,t,r){let s=document.querySelector("#_capacitor-camera-input"),i=()=>{var e;null===(e=s.parentNode)||void 0===e||e.removeChild(s)};s||((s=document.createElement("input")).id="_capacitor-camera-input",s.type="file",s.hidden=!0,document.body.appendChild(s),s.addEventListener("change",r=>{let a=s.files[0],n="jpeg";if("image/png"===a.type?n="png":"image/gif"===a.type&&(n="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){let r=new FileReader;r.addEventListener("load",()=>{"dataUrl"===e.resultType?t({dataUrl:r.result,format:n}):"base64"===e.resultType&&t({base64String:r.result.split(",")[1],format:n}),i()}),r.readAsDataURL(a)}else t({webPath:URL.createObjectURL(a),format:n}),i()}),s.addEventListener("cancel",e=>{r(new o.xz("User cancelled photos app")),i()})),s.accept="image/*",s.capture=!0,e.source===a.Photos||e.source===a.Prompt?s.removeAttribute("capture"):e.direction===n.Front?s.capture="user":e.direction===n.Rear&&(s.capture="environment"),s.click()}multipleFileInputExperience(e,t){let r=document.querySelector("#_capacitor-camera-input-multiple"),a=()=>{var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||((r=document.createElement("input")).id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",t=>{let n=[];for(let e=0;e<r.files.length;e++){let t=r.files[e],a="jpeg";"image/png"===t.type?a="png":"image/gif"===t.type&&(a="gif"),n.push({webPath:URL.createObjectURL(t),format:a})}e({photos:n}),a()}),r.addEventListener("cancel",e=>{t(new o.xz("User cancelled photos app")),a()})),r.accept="image/*",r.click()}_getCameraPhoto(e,t){return new Promise((r,a)=>{let n=new FileReader,s=e.type.split("/")[1];"uri"===t.resultType?r({webPath:URL.createObjectURL(e),format:s,saved:!1}):(n.readAsDataURL(e),n.onloadend=()=>{let e=n.result;"dataUrl"===t.resultType?r({dataUrl:e,format:s,saved:!1}):r({base64String:e.split(",")[1],format:s,saved:!1})},n.onerror=e=>{a(e)})})}async checkPermissions(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}new l;let c=(0,o.fo)("Camera",{web:()=>new l});var d=r(5047),m=r(7577),u=r(4770);let p={randomUUID:u.randomUUID},h=new Uint8Array(256),g=h.length,f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).slice(1));let x=function(e,t,r){if(p.randomUUID&&!t&&!e)return p.randomUUID();let a=(e=e||{}).random??e.rng?.()??(g>h.length-16&&((0,u.randomFillSync)(h),g=0),h.slice(g,g+=16));if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=a[e];return t}return function(e,t=0){return(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase()}(a)},b=()=>{let e=(0,d.useRouter)(),[t,r]=(0,m.useState)(!1),[a,n]=(0,m.useState)(null);(0,m.useEffect)(()=>{fetch("./setup.json").then(e=>e.json()).then(e=>{n(e)}).catch(e=>{console.error("Error loading config:",e)})},[]);let o=async()=>{try{r(!0);let t=await c.getPhoto({quality:100,resultType:s.Uri,allowEditing:!1});if(!t.webPath)throw Error("Photo capture failed");console.log("Photo captured:",t.webPath);let a=await l(t.webPath),n=x();console.log("Generated image ID:",n),await u(n,a),e.push(`/imageGallery?imageId=${n}`)}catch(e){console.error("Camera error:",e)}finally{r(!1)}},l=e=>new Promise((t,r)=>{fetch(e).then(e=>e.blob()).then(e=>{let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{"string"==typeof a.result?t(a.result):r("Failed to convert image to Base64")}}).catch(e=>r(e))}),u=(e,t)=>new Promise((r,a)=>{let n=indexedDB.open("ImageStorageDB",1);n.onupgradeneeded=()=>{let e=n.result;e.objectStoreNames.contains("images")||e.createObjectStore("images",{keyPath:"id"})},n.onsuccess=()=>{let s=n.result.transaction("images","readwrite");s.objectStore("images").put({id:e,data:t,timestamp:new Date().toISOString()}),s.oncomplete=()=>r(),s.onerror=e=>a(e)},n.onerror=e=>a(e)});return i.jsx("button",{className:`px-4 py-2 ${a?.cameraButtonColor} rounded-lg text-white shadow-md`,onClick:o,disabled:t,children:t?"Capturing...":"Use Camera"})};var y=r(4482);function v(){let[e,t]=(0,m.useState)(null);return(0,i.jsxs)("div",{className:"relative flex h-screen items-center justify-center",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[i.jsx("h1",{className:`text-3xl font-semibold ${e?.textColor} mb-8 text-center`,children:"Click below to upload image"}),i.jsx("div",{className:"flex space-x-4",children:i.jsx(b,{})})]}),i.jsx(y.Z,{})]})}},5047:(e,t,r)=>{"use strict";var a=r(7389);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},4379:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>c});var a=r(9510),n=r(8215),s=r.n(n),i=r(623),o=r.n(i);r(7272);let l=(0,r(8570).createProxy)(String.raw`/Users/obsaabate/Desktop/image-recognition-integration-system/image-recognition-integration-system/app/LayoutShell.tsx#default`),c={title:"IRIS",description:"An image recognition system framework webapp"};function d({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:`${s().variable} ${o().variable} antialiased`,children:a.jsx(l,{children:e})})})}},908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`/Users/obsaabate/Desktop/image-recognition-integration-system/image-recognition-integration-system/app/page.tsx#default`)},7481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(6621);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,538,621],()=>r(6698));module.exports=a})();